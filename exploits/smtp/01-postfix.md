## Postfix

Name      | Version
:---------|:--------------
Postfix   | 3.5.9

The homepage of Postfix is http://www.postfix.org/.

We used a [Docker image][1] by the GitHub user `bokysan`.

[1]: https://github.com/bokysan/docker-postfix

```
$ docker run --rm --name postfix -e "ALLOWED_SENDER_DOMAINS=example.com" -p 1587:587 boky/postfix
```

### HTTP Detection

Postfix detects and blocks HTTP POST requests.

```
220 1237cfa6400d ESMTP Postfix
POST / HTTP/1.1
221 2.7.0 Error: I can break rules, too. Goodbye.
Connection closed by foreign host.
```

```
220 1237cfa6400d ESMTP Postfix
Header: Field
221 2.7.0 Error: I can break rules, too. Goodbye.
Connection closed by foreign host.
```

### Error Tolerance

Yes. Postfix terminates the connection after 20 errors, which is
sufficient in all tested browsers. The following listing only shows
the server responses to an infinite stream of error commands.

```
502 5.5.2 Error: command not recognized
502 5.5.2 Error: command not recognized
502 5.5.2 Error: command not recognized
502 5.5.2 Error: command not recognized
502 5.5.2 Error: command not recognized
502 5.5.2 Error: command not recognized
502 5.5.2 Error: command not recognized
502 5.5.2 Error: command not recognized
502 5.5.2 Error: command not recognized
502 5.5.2 Error: command not recognized
502 5.5.2 Error: command not recognized
502 5.5.2 Error: command not recognized
502 5.5.2 Error: command not recognized
502 5.5.2 Error: command not recognized
502 5.5.2 Error: command not recognized
502 5.5.2 Error: command not recognized
502 5.5.2 Error: command not recognized
502 5.5.2 Error: command not recognized
502 5.5.2 Error: command not recognized
502 5.5.2 Error: command not recognized
421 4.7.0 1237cfa6400d Error: too many errors
Connection closed by foreign host.
```
### Reflection

Yes, pre-auth.

```
220 1237cfa6400d ESMTP Postfix
HELO example.com
250 1237cfa6400d
MAIL FROM: example <script>alert(1);</script>
555 5.5.4 Unsupported option: <script>alert(1);</script>
```
